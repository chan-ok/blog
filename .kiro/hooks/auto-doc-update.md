# Auto Documentation Update Hook

코드 변경 시 관련 문서를 자동으로 업데이트하는 훅입니다.

## 트리거 조건

- **이벤트**: 수동 실행 (버튼 클릭)
- **이름**: "문서 자동 업데이트"
- **설명**: "최근 변경사항을 분석하여 관련 문서를 업데이트합니다"

## 실행 프롬프트

문서 자동 업데이트를 시작합니다.

다음 단계를 순차적으로 실행해주세요:

---

### 1단계: 최근 변경사항 분석

```bash
git diff --name-status HEAD~5..HEAD
```

**분석 항목**:

- 추가된 파일 (A)
- 수정된 파일 (M)
- 삭제된 파일 (D)
- 이름 변경된 파일 (R)

**변경사항 분류**:

- 새로운 기능 추가
- 기존 기능 수정
- 버그 수정
- 리팩토링
- 설정 변경

---

### 2단계: 업데이트 대상 문서 결정

변경사항에 따라 업데이트할 문서를 결정합니다:

#### 새로운 컴포넌트 추가 시

- `docs/architecture.md` - 컴포넌트 구조에 추가
- `docs/implementation-plan.md` - 구현 완료 표시

#### 새로운 기능 추가 시

- `docs/changelog.md` - 변경 로그에 추가
- `docs/todo.md` - 완료 항목 체크
- `README.md` - 기능 목록 업데이트 (필요시)

#### 테스트 추가 시

- `docs/testing.md` - 테스트 현황 업데이트
- `docs/todo.md` - 테스트 작성 항목 체크

#### 설정 변경 시

- `docs/deployment.md` - 배포 설정 업데이트
- `docs/architecture.md` - 기술 스택 업데이트

#### 의존성 변경 시

- `docs/architecture.md` - 기술 스택 업데이트
- `docs/changelog.md` - 의존성 변경 기록

---

### 3단계: changelog.md 업데이트

**현재 날짜 섹션 확인**:

- 오늘 날짜 섹션이 있으면 해당 섹션에 추가
- 없으면 새로운 날짜 섹션 생성

**변경사항 분류 및 추가**:

```markdown
## [YYYY-MM-DD]

### 추가

- 새로운 기능 설명
- 새로운 컴포넌트 설명

### 수정

- 수정된 기능 설명
- 개선된 부분 설명

### 제거

- 제거된 기능 설명
- 삭제된 파일 설명

### 버그 수정

- 수정된 버그 설명
```

**작성 규칙**:

- 사용자 관점에서 작성
- 기술적 세부사항보다는 변경의 영향 설명
- 관련 파일명 포함
- 간결하고 명확하게

---

### 4단계: todo.md 업데이트

**완료된 작업 체크**:

- 변경사항과 매칭되는 TODO 항목 찾기
- `- [ ]`를 `- [x]`로 변경
- 완료 날짜 추가 (선택적)

**예시**:

```markdown
변경 전:

- [ ] 다크 모드 토글 버튼 UI

변경 후:

- [x] 다크 모드 토글 버튼 UI (2025-12-09 완료)
```

**새로운 TODO 추가**:

- 변경사항에서 발견된 추가 작업
- 개선 아이디어
- 알려진 이슈

---

### 5단계: architecture.md 업데이트

**업데이트 대상**:

#### 새로운 레이어/디렉토리 추가 시

```markdown
src/
├── features/
│ ├── new-feature/ # 새로 추가
│ │ ├── api/
│ │ ├── ui/
│ │ └── util/
```

#### 기술 스택 변경 시

```markdown
- **기술 스택**: Next.js 16.0.7, React 19.2.1, TypeScript, Tailwind CSS
  - 새로운 라이브러리 추가
  - 버전 업데이트
```

#### 주요 기술 결정 추가 시

```markdown
### N. 새로운 기술 결정

**결정**: 결정 내용

**이유**:

- 이유 1
- 이유 2
```

---

### 6단계: implementation-plan.md 업데이트

**완료된 구현 항목 체크**:

- 구현 완료된 기능 확인
- 체크박스 업데이트
- 완료 날짜 추가

**예시**:

```markdown
변경 전:

#### 4. About 페이지

- [ ] 원격 마크다운 파일 렌더링
- [ ] MDX 렌더링 기능

변경 후:

#### 4. About 페이지

- [x] 원격 마크다운 파일 렌더링 (완료)
- [x] MDX 렌더링 기능 (완료)
```

---

### 7단계: README.md 업데이트 (필요시)

**업데이트 대상**:

- 주요 기능 목록
- 설치 방법 (의존성 변경 시)
- 사용 방법 (새로운 스크립트 추가 시)
- 환경 변수 (새로운 환경 변수 추가 시)

---

### 8단계: 최종 확인 및 요약

**업데이트된 문서 목록 출력**:

```
📝 문서 업데이트 완료

업데이트된 문서:
  ✅ docs/changelog.md
     - [2025-12-09] 섹션에 3개 항목 추가

  ✅ docs/todo.md
     - 2개 항목 완료 체크
     - 1개 새로운 TODO 추가

  ✅ docs/architecture.md
     - 새로운 컴포넌트 구조 추가

  ✅ docs/implementation-plan.md
     - 4개 구현 항목 완료 체크

💡 다음 단계:
  1. 변경된 문서 내용 검토
  2. 필요시 수동으로 추가 수정
  3. 문서와 함께 커밋
```

---

## 실행 규칙

1. **변경사항 기반**: Git 히스토리를 기반으로 자동 분석
2. **지능적 매칭**: 파일 경로와 TODO 항목을 지능적으로 매칭
3. **중복 방지**: 이미 업데이트된 내용은 다시 추가하지 않음
4. **일관성 유지**: 기존 문서 형식과 스타일 유지
5. **사용자 확인**: 중요한 변경사항은 사용자에게 확인 요청

---

## 특수 케이스 처리

### 대규모 리팩토링

- 변경사항이 너무 많으면 요약하여 기록
- 세부사항은 커밋 메시지 참조

### 실험적 기능

- TODO에 "실험적" 태그 추가
- changelog에 명시

### Breaking Changes

- changelog에 "⚠️ Breaking Change" 표시
- 마이그레이션 가이드 추가 제안

---

## 문서 작성 가이드라인

### changelog.md

- **간결성**: 한 줄로 요약
- **명확성**: 무엇이 변경되었는지 명확히
- **사용자 중심**: 개발자가 아닌 사용자 관점

### todo.md

- **구체성**: 구체적인 작업 단위
- **우선순위**: 중요도 표시
- **완료 기준**: 언제 완료로 볼지 명확히

### architecture.md

- **정확성**: 현재 상태를 정확히 반영
- **일관성**: 기존 형식 유지
- **설명**: 왜 그렇게 설계했는지 설명

---

## 참고 문서

- [changelog.md](../docs/changelog.md) - 변경 로그
- [todo.md](../docs/todo.md) - 할 일 목록
- [architecture.md](../docs/architecture.md) - 아키텍처 문서
- [implementation-plan.md](../docs/implementation-plan.md) - 구현 계획
