# 개발 규칙 (Development Rules)

> 이 문서는 프로젝트 개발 시 반드시 지켜야 할 핵심 규칙입니다.
> 모든 개발자와 AI 에이전트는 이 규칙을 준수해야 합니다.

## 핵심 원칙

### 1. 기존 코드 재활용 우선

새 코드를 작성하기 전에 항상 기존 코드를 확인합니다:

- 이미 존재하는 유틸리티 함수, 컴포넌트가 있는지 확인
- 프로젝트에 설치된 라이브러리로 해결 가능한지 확인
- 가능하다면 기존 코드를 수정하여 사용

### 2. FSD 아키텍처 준수

[Feature-Sliced Design](https://feature-sliced.design/) 레이어 간 의존성 규칙을 엄격히 준수합니다:

```
app → widgets → features → entities → shared
```

| 레이어      | 역할          | Import 가능                         |
| ----------- | ------------- | ----------------------------------- |
| `app/`      | 라우팅        | widgets, features, entities, shared |
| `widgets/`  | 복합 UI       | features, entities, shared          |
| `features/` | 비즈니스 기능 | entities, shared                    |
| `entities/` | 도메인 엔티티 | shared                              |
| `shared/`   | 공유 리소스   | 없음 (독립적)                       |

자세한 내용은 [아키텍처 문서](./architecture.md)를 참고하세요.

### 3. TDD (Test-Driven Development)

새로운 코드 작성 시 TDD 사이클을 따릅니다:

1. **Red**: 요구사항을 확인하는 테스트 코드 먼저 작성
2. **Green**: 테스트를 통과하는 최소한의 코드 작성
3. **Refactor**: 코드 리팩토링 후 테스트 재실행

**금지 사항**:

- 테스트를 우회하는 방법 사용
- 하드코딩으로 테스트 통과
- 테스트 없이 코드 작성

자세한 내용은 [테스팅 가이드](./testing.md)를 참고하세요.

### 4. 코드 품질 검증

커밋 전 반드시 다음을 실행합니다:

```bash
pnpm fmt      # Prettier 포맷팅
pnpm lint     # ESLint 검사
pnpm tsc --noEmit  # TypeScript 타입 체크
```

Husky pre-commit 훅이 자동으로 lint-staged를 실행합니다.

### 5. 보안 우선

- 환경 변수에 민감한 정보 하드코딩 금지
- 서버 환경 변수를 클라이언트에 노출 금지
- 사용자 입력은 Zod로 검증
- `dangerouslySetInnerHTML` 사용 최소화

자세한 내용은 [보안 가이드](./security.md)를 참고하세요.

## 프로젝트 개요

| 항목       | 내용                            |
| ---------- | ------------------------------- |
| 프레임워크 | Next.js 16.0.7 + React 19.2.1   |
| 아키텍처   | Feature-Sliced Design (FSD)     |
| 스타일링   | Tailwind CSS v4                 |
| 상태 관리  | Zustand                         |
| 검증       | Zod v4                          |
| 테스팅     | Vitest + Playwright + Storybook |
| 배포       | Netlify                         |

### 리포지터리 구조

- **blog** (현재): Next.js 애플리케이션
- **blog-content**: MDX 콘텐츠 저장소

## AI 에이전트 답변 검증

AI 에이전트의 답변은 100% 완벽하지 않을 수 있으므로, **반드시 검증 과정**을 거쳐야 합니다.

### 필수 검증 항목

| 항목            | 확인 내용                                     |
| --------------- | --------------------------------------------- |
| 정보 정확성     | 존재하지 않는 함수, API, 라이브러리 사용 여부 |
| 코드 재사용     | 기존 코드 활용 가능 여부                      |
| 오버 엔지니어링 | 요구사항에 없는 기능 추가 여부                |
| 테스트 품질     | 하드코딩, 모킹 과다 사용 여부                 |
| 아키텍처 일관성 | FSD 레이어 규칙 준수 여부                     |
| 보안            | 환경 변수 하드코딩, XSS 취약점 여부           |

### 검증 프로세스

1. **즉시 검증**: AI 답변 직후 체크리스트 확인
2. **코드 적용 전**: 관련 항목 집중 검증
3. **실행 테스트**: 코드 적용 후 동작 확인
4. **반복**: 문제 발견 시 수정 요청

자세한 체크리스트는 [AI 검증 체크리스트](./ai-checklist.md)를 참고하세요.

## Kiro Agent Hooks

프로젝트에는 개발 워크플로우를 자동화하는 Agent Hooks가 설정되어 있습니다:

| 훅                    | 역할                      | 트리거                      |
| --------------------- | ------------------------- | --------------------------- |
| 🎨 Auto Storybook     | 컴포넌트 스토리 자동 생성 | `src/**/*.tsx` 파일 생성 시 |
| ✅ Code Quality Check | 포맷팅, 린트, 타입 체크   | 수동 실행 (커밋 전 권장)    |
| 📝 Auto Documentation | 문서 자동 업데이트        | 수동 실행 (기능 완성 후)    |

자세한 사용법은 [Kiro Hooks 가이드](./hooks-guide.md)를 참고하세요.

## 세부 가이드

### 개발 가이드

| 문서                                     | 설명                                     |
| ---------------------------------------- | ---------------------------------------- |
| [빠른 시작 가이드](./getting-started.md) | 개발 환경 설정 및 첫 기여                |
| [아키텍처](./architecture.md)            | FSD 구조 및 콘텐츠 파이프라인            |
| [코드 스타일 가이드](./code-style.md)    | TypeScript, Tailwind, 컴포넌트 작성 규칙 |
| [테스팅 가이드](./testing.md)            | Vitest, Playwright, Storybook 사용법     |
| [보안 가이드](./security.md)             | 환경 변수, XSS 방지, 봇 방지             |
| [Git 가이드](./git-guide.md)             | 커밋 메시지, 브랜치 전략                 |

### 운영 가이드

| 문서                                    | 설명                           |
| --------------------------------------- | ------------------------------ |
| [배포 가이드](./deployment.md)          | Netlify 배포 및 환경 변수 설정 |
| [Kiro Hooks 가이드](./hooks-guide.md)   | AI 자동화 훅 사용법            |
| [AI 검증 체크리스트](./ai-checklist.md) | AI 답변 검증 방법              |

### 프로젝트 관리

| 문서                                  | 설명                   |
| ------------------------------------- | ---------------------- |
| [구현 계획](./implementation-plan.md) | 기술 스택 및 진행 상황 |
| [변경 로그](./changelog.md)           | 버전별 변경 내역       |
| [할 일 목록](./todo.md)               | 남은 작업 목록         |

---

> 📖 전체 문서 목록은 [문서 홈](../README.md)을 참고하세요.
