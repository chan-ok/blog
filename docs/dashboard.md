# ðŸ“Š Next.js â†’ TanStack Router ë§ˆì´ê·¸ë ˆì´ì…˜ ëŒ€ì‹œë³´ë“œ

> **í”„ë¡œì íŠ¸**: Chanho's Dev Blog  
> **ì‹œìž‘ì¼**: 2026-02-07  
> **ë²„ì „**: 2.0.0 (CSR Only)  
> **ìƒíƒœ**: ðŸ”„ ì¤€ë¹„ ì¤‘

**ðŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸**: [P0-migration-checklist.md](./todo/P0-migration-checklist.md)  
**ðŸ“– ìƒì„¸ ê°€ì´ë“œ**: [P1-migration-plan.md](./todo/P1-migration-plan.md)

---

## ðŸŽ¯ í˜„ìž¬ ì§„í–‰ ìƒí™©

### ì „ì²´ ì§„í–‰ë¥ 

```
[â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 20% (ì‚¬ì „ ì¤€ë¹„ ì™„ë£Œ)
```

**í˜„ìž¬ ë‹¨ê³„**: Pre-Migration (ì‚¬ì „ ì¤€ë¹„)  
**ë‹¤ìŒ ë‹¨ê³„**: Phase 1 (í™˜ê²½ ì„¤ì •)

---

## ðŸ“Š ì§„í–‰ ìƒíƒœ íŠ¸ëž˜í‚¹

> **ìµœì‹  ì •ë³´**: ì•„ëž˜ í‘œëŠ” ìžë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. [P0-migration-checklist.md](./todo/P0-migration-checklist.md#-ì§„í–‰-ìƒíƒœ-íŠ¸ëž˜í‚¹)ì—ì„œ ì‹¤ì‹œê°„ ìƒíƒœë¥¼ í™•ì¸í•˜ì„¸ìš”.

| Phase    | ìž‘ì—… ë‚´ìš©     | ì˜ˆìƒ ì‹œê°„      | ì‹¤ì œ ì‹œê°„ | ìƒíƒœ    | ì™„ë£Œì¼ |
| -------- | ------------- | -------------- | --------- | ------- | ------ |
| Pre      | ì‚¬ì „ ì¤€ë¹„     | 0.5ì¼          | -         | ðŸ”² ëŒ€ê¸° | -      |
| Phase 1  | í™˜ê²½ ì„¤ì •     | 1-2ì¼          | -         | ðŸ”² ëŒ€ê¸° | -      |
| Phase 2  | ë¼ìš°íŒ…        | 2-3ì¼          | -         | ðŸ”² ëŒ€ê¸° | -      |
| Phase 3  | MDX           | 1ì¼            | -         | ðŸ”² ëŒ€ê¸° | -      |
| Phase 4  | ì»´í¬ë„ŒíŠ¸      | 1-2ì¼          | -         | ðŸ”² ëŒ€ê¸° | -      |
| Phase 5  | ì´ë¯¸ì§€ ìµœì í™” | 0.5ì¼          | -         | ðŸ”² ëŒ€ê¸° | -      |
| Phase 6  | ì›¹í°íŠ¸        | 0.5ì¼          | -         | ðŸ”² ëŒ€ê¸° | -      |
| Phase 7  | ë³´ì•ˆ          | 0.5ì¼          | -         | ðŸ”² ëŒ€ê¸° | -      |
| Phase 8  | ë°°í¬ ì„¤ì •     | 0.5ì¼          | -         | ðŸ”² ëŒ€ê¸° | -      |
| Phase 9  | í…ŒìŠ¤íŠ¸        | 1-2ì¼          | -         | ðŸ”² ëŒ€ê¸° | -      |
| Phase 10 | ë°°í¬          | 1ì¼            | -         | ðŸ”² ëŒ€ê¸° | -      |
| Post     | ì‚¬í›„ ê´€ë¦¬     | ì§€ì†           | -         | ðŸ”² ëŒ€ê¸° | -      |
| **í•©ê³„** |               | **8.5-12.5ì¼** | **0ì¼**   | -       | -      |

**ë²”ë¡€**: ðŸ”² ëŒ€ê¸° | ðŸ”„ ì§„í–‰ ì¤‘ | âœ… ì™„ë£Œ | âŒ ì°¨ë‹¨ë¨

---

## ðŸ› ì´ìŠˆ íŠ¸ëž˜í‚¹

> **ìµœì‹  ì •ë³´**: [P0-migration-checklist.md](./todo/P0-migration-checklist.md#-ì´ìŠˆ-íŠ¸ëž˜í‚¹)ì—ì„œ ì‹¤ì‹œê°„ ì´ìŠˆë¥¼ í™•ì¸í•˜ì„¸ìš”.

| ë²ˆí˜¸ | ë¬¸ì œ                       | ì‹¬ê°ë„  | ìƒíƒœ    | í•´ê²° ë°©ë²• | ë‹´ë‹¹ìž | í•´ê²°ì¼ |
| ---- | -------------------------- | ------- | ------- | --------- | ------ | ------ |
| #1   | ì˜ˆì‹œ: ì´ë¯¸ì§€ ë¡œë”© ì˜¤ë¥˜     | ðŸŸ¡ ì¤‘ê°„ | ðŸ”„ ìž‘ì—… | ...       | -      | -      |
| #2   | ì˜ˆì‹œ: TypeScript íƒ€ìž… ì¶©ëŒ | ðŸŸ¢ ë‚®ìŒ | âœ… í•´ê²° | ...       | -      | -      |

**ì‹¬ê°ë„**: ðŸ”´ ë†’ìŒ | ðŸŸ¡ ì¤‘ê°„ | ðŸŸ¢ ë‚®ìŒ  
**ìƒíƒœ**: ðŸ”² ë°œê²¬ | ðŸ”„ ìž‘ì—… ì¤‘ | âœ… í•´ê²° | âŒ ì°¨ë‹¨

---

## ðŸ“‹ Phaseë³„ ìƒì„¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… Pre-Migration (ì‚¬ì „ ì¤€ë¹„)

- [ ] í˜„ìž¬ í”„ë¡œì íŠ¸ ë°±ì—…
  - [ ] Git ë¸Œëžœì¹˜ ìƒì„±: `migration/tanstack-router`
- [ ] TanStack Router ê³µì‹ ë¬¸ì„œ í™•ì¸
- [ ] ê°œë°œ í™˜ê²½ í…ŒìŠ¤íŠ¸
- [ ] Netlify í™˜ê²½ ë³€ìˆ˜ ë°±ì—…
- [ ] í˜„ìž¬ ì‚¬ì´íŠ¸ ìŠ¤í¬ë¦°ìƒ· ì €ìž¥

### ðŸ”§ Phase 1: í™˜ê²½ ì„¤ì • (1-2ì¼)

**ëª©í‘œ**: íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° Vite ì„¤ì • ì™„ë£Œ

- [ ] íŒ¨í‚¤ì§€ ì œê±° (Next.js ê´€ë ¨)
- [ ] íŒ¨í‚¤ì§€ ì„¤ì¹˜ (TanStack Router, Vite, MDX)
- [ ] `vite.config.ts` ìƒì„±
  - [ ] **generatedRouteTree**: `'./src/shared/config/route/routeTree.gen.ts'` â­
- [ ] `tsconfig.json` ìˆ˜ì •
- [ ] `index.html` ìƒì„±
- [ ] `.gitignore` ì—…ë°ì´íŠ¸
- [ ] package.json ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ì •
- [ ] í™˜ê²½ ë³€ìˆ˜ ë³€ê²½ (`NEXT_PUBLIC_*` â†’ `VITE_*`)
- [ ] ê°œë°œ ì„œë²„ ì‹¤í–‰ í…ŒìŠ¤íŠ¸

**ì˜ˆìƒ ê²°ê³¼**: `pnpm dev`ë¡œ Vite ê°œë°œ ì„œë²„ ì‹¤í–‰ (5173 í¬íŠ¸)

---

### ðŸ—ºï¸ Phase 2: ë¼ìš°íŒ… êµ¬ì¡° ë§ˆì´ê·¸ë ˆì´ì…˜ (2-3ì¼)

**ëª©í‘œ**: TanStack Router íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ… êµ¬ì¡° ì™„ì„±

- [ ] `src/routes/` ë””ë ‰í† ë¦¬ ìƒì„±
- [ ] `src/main.tsx` ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ ìƒì„±
  - [ ] routeTree import: `@/shared/config/route/routeTree.gen` â­
- [ ] `__root.tsx`, `index.tsx`, `$locale.tsx` ìƒì„±
- [ ] íŽ˜ì´ì§€ ë¼ìš°íŠ¸ ìƒì„± (í™ˆ, About, Contact, Posts)
- [ ] ë¼ìš°íŒ… í…ŒìŠ¤íŠ¸

**ì˜ˆìƒ ê²°ê³¼**: ëª¨ë“  íŽ˜ì´ì§€ URL ì ‘ê·¼ ê°€ëŠ¥

---

### ðŸ“ Phase 3: MDX ì²˜ë¦¬ (1ì¼)

**ëª©í‘œ**: `@mdx-js/mdx`ë¡œ MDX ì»´íŒŒì¼ ë° ë Œë”ë§

- [ ] `getMarkdown` ìˆ˜ì • (compile + outputFormat: 'function-body')
- [ ] `MDXComponent` ìˆ˜ì • (new Function + useMemo)
- [ ] MDX ë Œë”ë§ í…ŒìŠ¤íŠ¸

**ì˜ˆìƒ ê²°ê³¼**: í¬ìŠ¤íŠ¸ ìƒì„¸ íŽ˜ì´ì§€ì—ì„œ MDX ì •ìƒ ë Œë”ë§

---

### ðŸŽ¨ Phase 4: ì»´í¬ë„ŒíŠ¸ ìˆ˜ì • (1-2ì¼)

**ëª©í‘œ**: Next.js ì˜ì¡´ì„± ì œê±°

- [ ] OptimizedImage ì»´í¬ë„ŒíŠ¸ ìƒì„± (ì™¸ë¶€/ë¡œì»¬ ì´ë¯¸ì§€ ë¶„ë¦¬)
- [ ] next/image â†’ OptimizedImage êµì²´
- [ ] Link ì»´í¬ë„ŒíŠ¸ ìˆ˜ì • (TanStack Router)
- [ ] 'use client', 'use server' ì œê±°
- [ ] í™˜ê²½ ë³€ìˆ˜ ì°¸ì¡° ë³€ê²½

**ì˜ˆìƒ ê²°ê³¼**: ëª¨ë“  ì»´í¬ë„ŒíŠ¸ ì •ìƒ ë™ìž‘

---

### ðŸ–¼ï¸ Phase 5: ì´ë¯¸ì§€ ìµœì í™” (0.5ì¼)

**ëª©í‘œ**: Vite Pluginìœ¼ë¡œ ë¡œì»¬ ì´ë¯¸ì§€ ìžë™ ìµœì í™”

- [ ] Vite Plugin ì„¤ì • í™•ì¸
- [ ] ë¹Œë“œ í…ŒìŠ¤íŠ¸ (WebP, AVIF ìžë™ ìƒì„±)
- [ ] ì™¸ë¶€ ì¸ë„¤ì¼ í…ŒìŠ¤íŠ¸

**ì˜ˆìƒ ê²°ê³¼**: `dist/image/` ë””ë ‰í† ë¦¬ì— ìµœì í™”ëœ ì´ë¯¸ì§€ ìƒì„±

---

### ðŸŒ Phase 6: ì›¹í°íŠ¸ ì„¤ì • (0.5ì¼)

**ëª©í‘œ**: Google Fonts ë‹¤êµ­ì–´ ì§€ì›

- [ ] `__root.tsx`ì— í°íŠ¸ ë§í¬ ì¶”ê°€
- [ ] Tailwind CSS ì„¤ì •
- [ ] CSS ì–¸ì–´ë³„ í°íŠ¸ ì„¤ì •

**ì˜ˆìƒ ê²°ê³¼**: ê° localeì—ì„œ ì˜¬ë°”ë¥¸ í°íŠ¸ ë Œë”ë§

---

### ðŸ”’ Phase 7: ë³´ì•ˆ (0.5ì¼)

**ëª©í‘œ**: Netlify Functionsë¡œ ë³´ì•ˆ ë¡œì§ ì²˜ë¦¬

- [ ] Contact í¼ ìˆ˜ì •
- [ ] Netlify Function í™•ì¸
- [ ] ë³´ì•ˆ í…ŒìŠ¤íŠ¸

**ì˜ˆìƒ ê²°ê³¼**: Contact í¼ ë©”ì¼ ë°œì†¡ ì„±ê³µ

---

### ðŸŒ Phase 8: ë°°í¬ ì„¤ì • (0.5ì¼)

**ëª©í‘œ**: Netlify ë°°í¬ ì„¤ì • ì™„ë£Œ

- [ ] `netlify.toml` ìˆ˜ì •
- [ ] í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
- [ ] ë¡œì»¬ í”„ë¡œë•ì…˜ ë¹Œë“œ í…ŒìŠ¤íŠ¸

**ì˜ˆìƒ ê²°ê³¼**: `pnpm build && pnpm preview` ì •ìƒ ë™ìž‘

---

### ðŸ§ª Phase 9: í…ŒìŠ¤íŠ¸ (1-2ì¼)

**ëª©í‘œ**: ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ ë° QA ì™„ë£Œ

- [ ] Vitest ìœ ë‹› í…ŒìŠ¤íŠ¸
- [ ] Storybook
- [ ] Playwright E2E í…ŒìŠ¤íŠ¸
- [ ] ìˆ˜ë™ í…ŒìŠ¤íŠ¸ (ì „ì²´ ê¸°ëŠ¥)
- [ ] í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (Lighthouse)

**ì˜ˆìƒ ê²°ê³¼**: ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼, Lighthouse > 90

---

### ðŸš¢ Phase 10: ë°°í¬ (1ì¼)

**ëª©í‘œ**: ìŠ¤í…Œì´ì§• ë° í”„ë¡œë•ì…˜ ë°°í¬

- [ ] ìŠ¤í…Œì´ì§• ë°°í¬ (Branch Deploy)
- [ ] ìŠ¤í…Œì´ì§• QA
- [ ] í”„ë¡œë•ì…˜ ë°°í¬
- [ ] í”„ë¡œë•ì…˜ ê²€ì¦

**ì˜ˆìƒ ê²°ê³¼**: í”„ë¡œë•ì…˜ ì‚¬ì´íŠ¸ ì •ìƒ ìš´ì˜

---

## ðŸ“Œ ì£¼ìš” ì˜ì‚¬ê²°ì • ê¸°ë¡

### âœ… í™•ì •ëœ ê²°ì •ì‚¬í•­

1. **CSR Only**: TanStack Start ì‚¬ìš© ì•ˆ í•¨ (ì•ˆì •ì„± ìš°ì„ )
2. **Netlify Functions ìœ ì§€**: ë³´ì•ˆ ë¡œì§ (Turnstile, Resend)
3. **Vite Plugin ì´ë¯¸ì§€ ìµœì í™”**: ë¡œì»¬ ì´ë¯¸ì§€ ìžë™ ì²˜ë¦¬
4. **ì™¸ë¶€ ì¸ë„¤ì¼ ì²˜ë¦¬**: GitHub Raw URLs ì§ì ‘ ë¡œë“œ + lazy loading
5. **í†µí•© DevTools**: `@tanstack/react-router-devtools` (Router + Query í¬í•¨)
6. **TanStack Router Meta**: ë‚´ìž¥ meta í•¨ìˆ˜ (react-helmet-async ë¶ˆí•„ìš”)
7. **MDX ì»´íŒŒì¼**: compile + new Function ë°©ì‹
8. **routeTree ê²½ë¡œ**: `src/shared/config/route/routeTree.gen.ts` (FSD êµ¬ì¡° ì¤€ìˆ˜) â­
9. **Google Fonts ì›¹í°íŠ¸**: ì˜ì–´, í•œêµ­ì–´, ì¼ë³¸ì–´ ì§€ì›
10. **SEO**: í˜„ìž¬ ê³ ë ¤ ëŒ€ìƒ ì•„ë‹˜ (ê°œì¸ ë¸”ë¡œê·¸)

---

## ðŸŽ¯ ì„±ê³µ ê¸°ì¤€

### í•„ìˆ˜ (Must Have)

- [ ] ëª¨ë“  íŽ˜ì´ì§€ ì •ìƒ ë™ìž‘
- [ ] Contact í¼ ë©”ì¼ ë°œì†¡ ì„±ê³µ
- [ ] ì´ë¯¸ì§€ ìµœì í™” ì ìš© (ë¡œì»¬ ì´ë¯¸ì§€)
- [ ] ë‹¤êµ­ì–´ (ko/en/ja) ë™ìž‘
- [ ] í…Œë§ˆ ì „í™˜ (light/dark) ë™ìž‘
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼

### ê¶Œìž¥ (Should Have)

- [ ] Lighthouse Performance > 90
- [ ] ì´ˆê¸° ë¡œë”© < 3ì´ˆ
- [ ] í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì € í˜¸í™˜ì„±
- [ ] ëª¨ë°”ì¼ ë°˜ì‘í˜•

### ì„ íƒ (Nice to Have)

- [ ] Rate Limiting êµ¬í˜„
- [ ] ì—ëŸ¬ ì¶”ì  ë„êµ¬ ì—°ë™
- [ ] ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ

---

## ðŸ“ ë©”ëª¨

### ìµœê·¼ ë³€ê²½ì‚¬í•­

- **2026-02-07**: ëŒ€ì‹œë³´ë“œ ìƒì„±
- **2026-02-07**: routeTree ê²½ë¡œë¥¼ `src/shared/config/route/routeTree.gen.ts`ë¡œ ë³€ê²½ (FSD êµ¬ì¡° ì¤€ìˆ˜)
- **2026-02-07**: ì´ë¯¸ì§€ ìµœì í™” ì „ëžµ í™•ì • (Vite Plugin + ì™¸ë¶€ URL ë¶„ë¦¬)
- **2026-02-07**: MDX ì»´íŒŒì¼ ì „ëžµ í™•ì • (compile + new Function)
- **2026-02-07**: í†µí•© DevTools ì‚¬ìš© í™•ì • (`@tanstack/react-router-devtools`)

### ë‹¤ìŒ í•  ì¼

1. Pre-Migration ì‚¬ì „ ì¤€ë¹„ ì‹œìž‘
2. Git ë¸Œëžœì¹˜ ìƒì„± (`migration/tanstack-router`)
3. TanStack Router ê³µì‹ ë¬¸ì„œ ìµœì‹  ë²„ì „ í™•ì¸
4. Phase 1 (í™˜ê²½ ì„¤ì •) ì‹œìž‘

---

**ë¬¸ì„œ ë²„ì „**: 1.0.0  
**ìµœì¢… ìˆ˜ì •ì¼**: 2026-02-07  
**ìž‘ì„±ìž**: OpenCode (Claude)

---

**ðŸ“‹ [ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ ì´ë™](./todo/P0-migration-checklist.md)** | **ðŸ“– [ìƒì„¸ ê°€ì´ë“œë¡œ ì´ë™](./todo/P1-migration-plan.md)**
