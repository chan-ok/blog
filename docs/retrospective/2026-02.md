# 2026년 2월 회고

## 변경 이력

### 2026-02-11 — PR #40: 문서 구조 개편 - agents.md 분리 및 에이전트 프롬프트 최적화

#### 변경 요약

- 21개 파일 변경 (+1,236 / -1,329)
- `docs/agents.md` (955줄) → 허브 문서(140줄) + 9개 상세 문서 분리 (85% 축소)
- `.agents/agents/` 8개 에이전트 프롬프트 최적화 (1,545줄 → 1,235줄, 20% 감소)
- `opencode.json` 권한 설정 동기화

#### ✅ 잘한 점 (Keep)

- **체계적 Phase 분리**: 3단계 (문서 분리 → 프롬프트 최적화 → 일관성 검증)로 리스크 최소화
- **내용 무손실 분리**: 955줄 거대 문서를 9개 문서로 분리하면서 내용 100% 보존
- **프론트매터 보존**: 에이전트 프롬프트 최적화 시 YAML frontmatter 100% 유지 (동작 영향 없음)
- **상호 참조 체계**: 각 분리 문서에 `> 이 문서의 상위 문서: [agents.md](./agents.md)` 네비게이션 추가
- **검증 루프**: 각 Phase마다 tech-architect 검증 수행, Phase 3에서 doc-manager 교차 검증
- **중복 제거 원칙 일관 적용**: 에이전트 프롬프트에서 `docs/`와 중복되는 규칙을 참조(`→ 상세: docs/*.md`)로 교체

#### 🔧 개선점 (Problem)

- **커밋 중복**: 7개 커밋 중 동일 제목 커밋 존재 (commit 1과 3: `docs(agents): 문서 구조 개편 - 허브 문서 + 9개 상세 문서 분리`, commit 6과 7: `docs: 일관성 검증 개선 - 참조 누락 수정 및 구체화`). Phase별 squash 또는 명확한 커밋 구분 필요
- **opencode.json 변경 범위**: 문서 구조 개편 PR에 opencode.json 권한 설정까지 포함 (+182/-73). 관심사 분리가 아쉬움 — 별도 커밋 또는 PR로 분리하는 것이 리뷰 부담 감소
- **agents.md 최종 크기 불일치**: 커밋 메시지에 "~200줄"이라 했으나 실제 최종 크기는 약 140줄. 커밋 메시지의 정확성 개선 필요
- **PR 상태**: 아직 OPEN 상태 — 리뷰/머지 프로세스 진행 필요

#### 🤖 에이전트 개선 제안 (Try)

- **git-guardian**: 동일 제목 커밋 감지 로직 추가. `git log --oneline` 결과에서 중복 제목 발견 시 경고 및 squash 제안
  - 파일: `.agents/agents/git-guardian.md`
  - 추가 규칙: "커밋 생성 전 최근 5개 커밋과 제목 중복 여부 확인. 중복 시 `--amend` 또는 구체적 제목 사용 권장"
- **doc-manager**: 문서 분리 작업 시 "커밋 메시지 내 수치와 실제 파일 줄 수 일치 여부" 검증 체크리스트 추가
  - 파일: `.agents/agents/doc-manager.md`
- **master-orchestrator**: 대규모 설정 파일(opencode.json) 변경은 문서/코드 변경과 별도 커밋으로 분리하는 규칙 추가
  - 파일: `.agents/agents/master-orchestrator.md`

#### 워크플로우 효율성 평가

- **Git Flow 준수**: ✅ `develop → feature branch → worktrees` 정상 운용
- **에이전트 분업**: ✅ doc-manager(문서 작성) + tech-architect(검증) 역할 분리 적절
- **병렬 작업**: ⚠️ 이번 PR은 문서 전용이라 병렬 필요성 낮았으나, Phase 1~2는 독립적이므로 병렬 실행 가능했음
- **전체 소요 시간**: 7개 커밋, 약 30분 내 완료 — 문서 전용 작업치고 효율적

### 2026-02-11 (이전)

- 에이전트 권한 체계 전면 정비 (opencode.json + 문서 12개 동기화)
  - git add: git-guardian 전용으로 통합 (다른 에이전트에서 제거)
  - pnpm test/lint/tsc/fmt: 전문 에이전트만 보유 (orchestrator/git-guardian/github-helper에서 제거)
  - mkdir docs/\*: master-orchestrator → doc-manager 이관
  - lint-formatter edit에 기본 deny 추가
  - global permission에서 git add 관련 5개 항목 삭제
  - 권한 매트릭스 및 에이전트 프롬프트 전면 재검증

### 2026-02-08

- Next.js 16에서 TanStack Router v1 + Vite v7로 마이그레이션 완료
- 멀티 에이전트 시스템 활용 (Master Orchestrator + 6 Subagents)
- 빌드 성능 60% 개선, HMR 95% 개선, 번들 크기 25% 감소
- `@mdx-js/mdx`로 런타임 MDX 렌더링 전환 (`compile()` + `new Function()`)
- Git Worktree 기반 병렬 작업 전략 도입
